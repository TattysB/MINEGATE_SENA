<!DOCTYPE html>
{% load static %}

<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MineGate - Contraseña Actualizada</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="stylesheet" href="{% static 'css/recuperacion_contraseña.css' %}" />
    <link rel="stylesheet" href="{% static 'css/contrasena_actualizada.css' %}" />
</head>

<body>
    <!-- Contenedor de confetti -->
    <div class="confetti-container" id="confettiContainer"></div>
    
    <!-- Estrellas de fondo -->
    <div class="stars" id="stars"></div>
    
    <div class="recuperacion-container">
        <!-- Checkmark animado -->
        <div class="checkmark-container">
            <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
                <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
            </svg>
        </div>
        
        <div class="recuperacion-header">
            <h1>¡Contraseña Actualizada!</h1>
            <p>Tu contraseña ha sido cambiada exitosamente. Ahora puedes iniciar sesión con tu nueva contraseña.</p>
        </div>

        <div class="info-box">
            <i class="fa-solid fa-shield-halved"></i>
            <p><strong>Consejo de Seguridad:</strong> Nunca compartas tu contraseña con nadie y asegúrate de cerrar sesión en dispositivos compartidos.</p>
        </div>

        <a href="{% url 'usuarios:login' %}" class="btn-back">
            <i class="fa-solid fa-right-to-bracket"></i> Iniciar Sesión
        </a>

        <div class="countdown-container">
            <i class="fa-solid fa-clock"></i>
            <span>Redirigiendo en </span>
            <span class="countdown-number" id="countdown">5</span>
            <span> segundos...</span>
        </div>
    </div>

    <script>
        // Crear confetti
        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            const colors = ['#10b981', '#059669', '#fbbf24', '#f59e0b', '#3b82f6', '#8b5cf6', '#ec4899'];
            const shapes = ['square', 'circle'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.borderRadius = shapes[Math.floor(Math.random() * shapes.length)] === 'circle' ? '50%' : '2px';
                    confetti.style.width = (Math.random() * 10 + 5) + 'px';
                    confetti.style.height = confetti.style.width;
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    container.appendChild(confetti);
                    
                    // Remover después de la animación
                    setTimeout(() => confetti.remove(), 3500);
                }, i * 50);
            }
        }
        
        // Crear estrellas de fondo
        function createStars() {
            const container = document.getElementById('stars');
            
            for (let i = 0; i < 10; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.innerHTML = '<i class="fa-solid fa-star"></i>';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                star.style.fontSize = (Math.random() * 15 + 10) + 'px';
                container.appendChild(star);
            }
        }
        
        // Countdown con animación
        let seconds = 5;
        const countdownEl = document.getElementById('countdown');
        
        const countdownInterval = setInterval(() => {
            seconds--;
            countdownEl.textContent = seconds;
            countdownEl.style.transform = 'scale(1.3)';
            setTimeout(() => {
                countdownEl.style.transform = 'scale(1)';
            }, 200);
            
            if (seconds <= 0) {
                clearInterval(countdownInterval);
                window.location.href = "{% url 'usuarios:login' %}";
            }
        }, 1000);
        
        // Inicializar animaciones
        document.addEventListener('DOMContentLoaded', function() {
            createConfetti();
            createStars();
        });
    </script>
</body>
</html>
